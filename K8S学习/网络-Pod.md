## Pod网络原则
1. 每个 Pod 拥有独立的 IP 地址：Pod 内的所有容器共享该 IP（共享网络命名空间），容器间通过localhost通信。
2. Pod 间直接通信：无需 NAT（网络地址转换），同一集群内的 Pod 可直接通过 IP 互通（无论是否在同一节点）。
3. Pod 与外部通信：通过 Service、Ingress 等组件实现，规则统一且可配置

## Pod网络原理
### 1. Pod的ip
- 分配方式：每个 Pod 在创建时会被分配一个唯一的 IP 地址（通常是 IPv4），该 IP 仅在集群内部可见（属于 “集群私有地址”）。
- 生命周期：Pod 的 IP 与 Pod 绑定，当 Pod 被销毁（如重建、扩缩容）时，IP 会释放；新 Pod 会重新分配新 IP（因此 Pod 的 IP 是 “动态的”）。
- 容器共享网络：Pod 内的多个容器共享同一个网络命名空间（netns），因此：
  - 容器间可通过localhost:端口直接通信（无需跨网络）。
  - 所有容器共享 Pod 的 IP 和端口（需注意端口冲突）。

### 2. Pod间的网络通信
Pod 间通信（包括同一节点和跨节点）依赖CNI（Container Network Interface，容器网络接口）插件，K8s 本身不实现网络功能，而是通过 CNI 插件对接底层网络。
- 同一节点的 Pod 通信：节点内的 Pod 通过 “虚拟网桥”（如 CNI 插件创建的cni0网桥）转发流量，无需经过物理网络
- 跨节点的 Pod 通信：不同节点的 Pod 需通过节点的物理网卡或 overlay 网络（如 VXLAN）转发流量，具体方式由 CNI 插件决定：
  - Flannel：通过 VXLAN 创建 overlay 网络，将 Pod IP 封装在节点 IP 中传输，适合简单场景。
  - Calico：基于 BGP 协议路由，直接通过物理网络转发（无封装），性能更好，支持网络策略。
  - Weave Net：支持加密通信，适合多集群场景。